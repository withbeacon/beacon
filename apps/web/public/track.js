var{width:g,height:m}=window.screen,{userAgent:c,doNotTrack:v}=navigator,{title:d,referrer:a}=document,l=`${g}x${m}`,u=v==="1",{currentScript:r}=document;if(!r)throw new Error("[beacon] unable to get the script for beacon analytics");var h=r.getAttribute("data-endpoint")??"/api/collect";function E(){let t=new URL(r.getAttribute("src"));return`${t.protocol}//${t.host}`}var y=E(),f=y+h;if(!(typeof window<"u"&&window.document))throw new Error("[beacon] stopping the execution as not currently on client side");if(u)throw new Error("[beacon] not tracking as do not track is enabled");var w=0,s=!1,L=setInterval(()=>{s||(w+=500)},500);function b(t){let e={url:t||window.location.href,visitTime:w,screen:l,referrer:a,userAgent:c,title:d,events:i};fetch(f,{method:"POST",body:JSON.stringify(e)})}document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&b()});var x=document.querySelectorAll("[data-event]"),i={};function A(t,e,n){t={...t,[n+"ed"]:!0},i={...i,[e]:t}}x.forEach(t=>{let e=t.getAttribute("data-event-name"),n=t.getAttribute("data-event"),p={};!e||!n||t.addEventListener(n,()=>A(p,e,n))});window.addEventListener("blur",async()=>{s=!0});window.addEventListener("focus",async()=>{s=!1});window.addEventListener("beforeunload",async()=>{clearInterval(L)});var o="",T=new MutationObserver(()=>{window.location.href!==o&&(o=window.location.href,b(o))});T.observe(document,{subtree:!0,childList:!0});
