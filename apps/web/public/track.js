var{width:g,height:v}=window.screen,{userAgent:c,doNotTrack:h}=navigator,{title:a,referrer:d}=document,l=`${g}x${v}`,u=h==="1",f=Intl.DateTimeFormat().resolvedOptions().timeZone,{currentScript:o}=document;if(!o)throw new Error("[beacon] unable to get the script for beacon analytics");var E=o.getAttribute("data-endpoint")??"/api/collect";function y(){let e=new URL(o.getAttribute("src"));return`${e.protocol}//${e.host}`}var L=y(),w=L+E;if(!(typeof window<"u"&&window.document))throw new Error("[beacon] stopping the execution as not currently on client side");if(u)throw new Error("[beacon] not tracking as do not track is enabled");var p=0,s=!1,x=setInterval(()=>{s||(p+=500)},500);function b(e){let t={url:e||window.location.href,visitTime:p,screen:l,referrer:d,userAgent:c,title:a,events:i,timezone:f};fetch(w,{method:"POST",body:JSON.stringify(t)})}document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&b()});var A=document.querySelectorAll("[data-event]"),i={};function T(e,t,n){e={...e,[n+"ed"]:!0},i={...i,[t]:e}}A.forEach(e=>{let t=e.getAttribute("data-event-name"),n=e.getAttribute("data-event"),m={};!t||!n||e.addEventListener(n,()=>T(m,t,n))});window.addEventListener("blur",async()=>{s=!0});window.addEventListener("focus",async()=>{s=!1});window.addEventListener("beforeunload",async()=>{clearInterval(x)});var r="",O=new MutationObserver(()=>{window.location.href!==r&&(r=window.location.href,b(r))});O.observe(document,{subtree:!0,childList:!0});
