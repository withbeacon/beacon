var{width:g,height:h}=window.screen,{userAgent:c,doNotTrack:v}=navigator,{title:s,referrer:d}=document,l=`${g}x${h}`,u=v==="1",w=Intl.DateTimeFormat().resolvedOptions().timeZone,{currentScript:o}=document;if(!o)throw new Error("[beacon] unable to get the script for beacon analytics");var E=o.getAttribute("data-endpoint")??"/api/collect";function y(){let e=new URL(o.getAttribute("src"));return`${e.protocol}//${e.host}`}var x=y(),f=x+E;if(!(typeof window<"u"&&window.document))throw new Error("[beacon] stopping the execution as not currently on client side");if(window.location.hostname==="localhost")throw new Error("[beacon] stopping the execution as on localhost");if(u)throw new Error("[beacon] not tracking as do not track is enabled");var p=0,a=!1,L=setInterval(()=>{a||(p+=500)},500);function b(e){let t={url:e||window.location.href,visitTime:p,screen:l,referrer:d,userAgent:c,title:s,events:i,timezone:w};window.beacon.before&&window.beacon.before({pathname:window.location.pathname})===null||fetch(f,{method:"POST",body:JSON.stringify(t)})}document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&b()});var A=document.querySelectorAll("[data-event]"),i={};function T(e,t,n){e={...e,[n+"ed"]:!0},i={...i,[t]:e}}A.forEach(e=>{let t=e.getAttribute("data-event-name"),n=e.getAttribute("data-event"),m={};!t||!n||e.addEventListener(n,()=>T(m,t,n))});window.addEventListener("blur",async()=>{a=!0});window.addEventListener("focus",async()=>{a=!1});window.addEventListener("beforeunload",async()=>{clearInterval(L)});var r="",O=new MutationObserver(()=>{window.location.href!==r&&(r=window.location.href,b(r))});O.observe(document,{subtree:!0,childList:!0});
